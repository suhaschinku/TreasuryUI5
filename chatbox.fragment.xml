<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">

    <VBox class="ChatBox dasTextAreaInput">
        <!-- Combined Dropdown and Search Box -->
        <ComboBox
            id="searchFilterCombo"
            items="{chatModel>/searchFilters}"
            placeholder="Search or select a filter..."
            value="{chatModel>/searchQuery}"
            liveChange="onSearch"
            selectionChange="onDropdownChange"
            filterSuggests="true"
            showSecondaryValues="false"
            width="96%"
            class="chatComboBox sapUiSmallMarginBottom">
            <core:Item key="{chatModel>key}" text="{chatModel>text}"/>
        </ComboBox>

        <!-- Existing Chat Box -->
        <FlexBox id="ChatBotresult" height="5rem">
            <TextArea
                id="chatFeedInput"
                width="96%"
                height="500px"
                class="chattextarea"
                liveChange="userlivechange"
                value="{chatModel>/userMessage}"
                enabled="{= !${chatModel>/busyIndicator} }"
                rows="1"
                growingMaxLines="23"
                placeholder="{chatModel>/placeHolder}"
                growing="true">
                <layoutData>
                    <FlexItemData growFactor="1"/>
                </layoutData>
            </TextArea>
        </FlexBox>

        <FlexBox
            id="chatBusyIndicator1"
            visible="{chatModel>/busyIndicator}"
            justifyContent="Center"
            alignItems="Center"
            class="busyBox">
        </FlexBox>

        <FlexBox
            id="btncontrolls"
            justifyContent="Start"
            alignItems="Start"
            class="busyBox">
            <Button
                text="Ask FinSight"
                press="onUserChat"/>
        </FlexBox>

        <!-- Custom CSS for ComboBox -->
        <core:HTML>
            <style>
                .chatComboBox .sapMComboBoxTextField {
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    padding: 8px;
                    font-size: 14px;
                    background-color: #fff;
                    color: #333;
                }
                .chatComboBox .sapMComboBoxArrow {
                    background-color: #f5f5f5;
                    border-left: 1px solid #ccc;
                }
                .chatComboBox .sapMComboBoxTextField:focus {
                    border-color: #0070b1;
                    outline: none;
                }
                .chatComboBox .sapMList {
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    background-color: #fff;
                }
                .chatComboBox .sapMListItems .sapMLIB {
                    font-size: 14px;
                    color: #333;
                }
                .chatComboBox .sapMListItems .sapMLIB:hover {
                    background-color: #e6f0fa;
                }
            </style>
        </core:HTML>
    </VBox>
</core:FragmentDefinition>
